{"ast":null,"code":"import _defineProperty from\"/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _classCallCheck from\"/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import*as React from\"react\";import ApiClient from\"../services/ApiClient\";import LastAttemptsComponent from'./LastAttemptComponent';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChallengeComponent=/*#__PURE__*/function(_React$Component){_inherits(ChallengeComponent,_React$Component);var _super=_createSuper(ChallengeComponent);function ChallengeComponent(props){var _this;_classCallCheck(this,ChallengeComponent);_this=_super.call(this,props);_this.state={a:'',b:'',user:'',message:'',guess:0};_this.handleSubmitResult=_this.handleSubmitResult.bind(_assertThisInitialized(_this));_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));return _this;}_createClass(ChallengeComponent,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;ApiClient.challenge().then(function(res){if(res.ok){res.json().then(function(json){_this2.setState({a:json.factorA,b:json.factorB});});}else{_this2.updateMessage(\"Can't reach the server\");}});}},{key:\"handleChange\",value:function handleChange(event){var name=event.target.name;this.setState(_defineProperty({},name,event.target.value));}},{key:\"handleSubmitResult\",value:function handleSubmitResult(event){var _this3=this;event.preventDefault();ApiClient.sendGuess(this.state.user,this.state.a,this.state.b,this.state.guess).then(function(res){if(res.ok){res.json().then(function(json){if(json.correct){_this3.updateMessage(\"Congratulations! Your guess is correct\");}else{_this3.updateMessage(\"Oops! Your guess \"+json.resultAttempt+\" is wrong, but keep playing!\");}_this3.updateLastAttempts(_this3.state.user);_this3.refreshChallenge();});}else{_this3.updateMessage(\"Error: server error or not available\");}});}},{key:\"updateMessage\",value:function updateMessage(m){this.setState({message:m});}},{key:\"updateLastAttempts\",value:function updateLastAttempts(userAlias){var _this4=this;ApiClient.getAttempts(userAlias).then(function(res){if(res.ok){var attempts=[];res.json().then(function(data){data.forEach(function(item){attempts.push(item);});_this4.setState({lastAttempts:attempts});});}});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your new challenge is\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"challenge\",children:[this.state.a,\" x \",this.state.b]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.handleSubmitResult,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Your alias:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",maxLength:\"12\",name:\"user\",value:this.state.user,onChange:this.handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Your guess:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",name:\"guess\",value:this.state.guess,onChange:this.handleChange})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Submit\"})]}),/*#__PURE__*/_jsx(\"h4\",{children:this.state.message}),this.state.lastAttempts.length>0&&/*#__PURE__*/_jsx(LastAttemptComponent,{lastAttempts:this.state.lastAttempts})]});}}]);return ChallengeComponent;}(React.Component);export default ChallengeComponent;","map":{"version":3,"names":["React","ApiClient","LastAttemptsComponent","jsx","_jsx","jsxs","_jsxs","ChallengeComponent","_React$Component","_inherits","_super","_createSuper","props","_this","_classCallCheck","call","state","a","b","user","message","guess","handleSubmitResult","bind","_assertThisInitialized","handleChange","_createClass","key","value","componentDidMount","_this2","challenge","then","res","ok","json","setState","factorA","factorB","updateMessage","event","name","target","_defineProperty","_this3","preventDefault","sendGuess","correct","resultAttempt","updateLastAttempts","refreshChallenge","m","userAlias","_this4","getAttempts","attempts","data","forEach","item","push","lastAttempts","render","children","className","onSubmit","type","maxLength","onChange","min","length","LastAttemptComponent","Component"],"sources":["/Users/hariharan.thavachelvam/Documents/Sandbox/workspace/My Learning/microservices-v2/challenges-frontend/src/components/ChallengeComponent.js"],"sourcesContent":["import * as React from \"react\";\nimport ApiClient from \"../services/ApiClient\";\nimport LastAttemptsComponent from './LastAttemptComponent'\n\nclass ChallengeComponent extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            a: '', b: '',\n            user: '',\n            message: '',\n            guess: 0\n        };\n        this.handleSubmitResult = this.handleSubmitResult.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    componentDidMount(): void {\n        ApiClient.challenge().then(\n            res => {\n                if (res.ok) {\n                    res.json().then(json => {\n                        this.setState({\n                            a: json.factorA,\n                            b: json.factorB\n                        });\n                    });\n                } else {\n                    this.updateMessage(\"Can't reach the server\");\n                }\n            }\n        );\n    }\n\n    handleChange(event) {\n        const name = event.target.name;\n        this.setState({\n            [name]: event.target.value\n        });\n    }\n\n    handleSubmitResult(event) {\n        event.preventDefault();\n        ApiClient.sendGuess(this.state.user,\n            this.state.a, this.state.b,\n            this.state.guess)\n            .then(res => {\n                if (res.ok) {\n                    res.json().then(json => {\n                        if (json.correct) {\n                            this.updateMessage(\"Congratulations! Your guess is correct\");\n                        } else {\n                            this.updateMessage(\"Oops! Your guess \" + json.resultAttempt +\n                            \" is wrong, but keep playing!\");\n                        }\n                        this.updateLastAttempts(this.state.user);\n                        this.refreshChallenge();\n                    });\n                } else {\n                   this.updateMessage(\"Error: server error or not available\");\n                }\n            });\n    }\n\n    updateMessage(m: string) {\n        this.setState({\n          message: m\n        });\n    }\n\n    updateLastAttempts(userAlias: string) {\n        ApiClient.getAttempts(userAlias).then(res => {\n            if (res.ok) {\n                let attempts: Attempt[] = [];\n                res.json().then(data => {\n                    data.forEach(item => {\n                        attempts.push(item);\n                    });\n                    this.setState({\n                        lastAttempts: attempts\n                    });\n                })\n            }\n        })\n    }\n\n    render() {\n        return (\n            <div>\n                <div>\n                    <h3>Your new challenge is</h3>\n                    <div className=\"challenge\">\n                        {this.state.a} x {this.state.b}\n                    </div>\n                </div>\n                <form onSubmit={this.handleSubmitResult}>\n                    <label>\n                        Your alias:\n                        <input type=\"text\" maxLength=\"12\"\n                               name=\"user\"\n                               value={this.state.user}\n                               onChange={this.handleChange}/>\n                    </label>\n                    <br/>\n                    <label>\n                        Your guess:\n                        <input type=\"number\" min=\"0\"\n                               name=\"guess\"\n                               value={this.state.guess}\n                               onChange={this.handleChange}/>\n                    </label>\n                    <br/>\n                    <input type=\"submit\" value=\"Submit\"/>\n                </form>\n                <h4>{this.state.message}</h4>\n                {this.state.lastAttempts.length > 0 &&\n                    <LastAttemptComponent lastAttempts = {this.state.lastAttempts} />\n                 }\n            </div>\n        );\n    }\n}\n\nexport default ChallengeComponent;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}